<?xml version="1.0" encoding="UTF-8"?>
<analysisEngineDescription xmlns="http://uima.apache.org/resourceSpecifier">
  <frameworkImplementation>org.apache.uima.java</frameworkImplementation>
  <primitive>true</primitive>
  <annotatorImplementationName>txtfnnl.uima.analysis_component.KnownEntityAnnotator</annotatorImplementationName>
  <analysisEngineMetaData>
    <name>KnownEntityAnnotator</name>
    <description>Uses regex matching to annotate matching words from a given (named) entity dictionary if the target (named) entity IDs are known for the document. The resulting SemanticAnnotation type ID may be defined for each entity individually as long as all resulting IDs are in the same namespace. I.e., if entities in different namespaces should be annotated, a different annotator instance should be configured.</description>
    <version>1.0</version>
    <vendor>txtfnnl</vendor>
    <configurationParameters>
      <configurationParameter>
        <name>DriverClass</name>
        <description>The full JDBC driver class name.</description>
        <type>String</type>
        <multiValued>false</multiValued>
        <mandatory>true</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>Namespace</name>
        <description>The namespace for the entity annotations.</description>
        <type>String</type>
        <multiValued>false</multiValued>
        <mandatory>true</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>Username</name>
        <description>DB username</description>
        <type>String</type>
        <multiValued>false</multiValued>
        <mandatory>false</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>Password</name>
        <description>DB password</description>
        <type>String</type>
        <multiValued>false</multiValued>
        <mandatory>false</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>LoginTimeout</name>
        <description>DB connection login timeout (seconds)</description>
        <type>Integer</type>
        <multiValued>false</multiValued>
        <mandatory>false</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>ReadOnly</name>
        <description>create read-only DB connections</description>
        <type>Boolean</type>
        <multiValued>false</multiValued>
        <mandatory>false</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>IsolationLevel</name>
        <description>DB transaction isolation level</description>
        <type>String</type>
        <multiValued>false</multiValued>
        <mandatory>false</mandatory>
      </configurationParameter>
      <configurationParameter>
        <name>Queries</name>
        <description>The SQL queries to use to fetch names from the DB. Its first result set field must be the name (String) and the queries must contain to parameters ("?"), the first wil hold the namespace value, the second the identifier value of the entity as found in the entity mapping resource file.</description>
        <type>String</type>
        <multiValued>true</multiValued>
        <mandatory>true</mandatory>
      </configurationParameter>
    </configurationParameters>
    <configurationParameterSettings>
      <nameValuePair>
        <name>DriverClass</name>
        <value>
          <string>org.postgres.Driver</string>
        </value>
      </nameValuePair>
      <nameValuePair>
        <name>Namespace</name>
        <value>
          <string>semantic_annotation_namespace</string>
        </value>
      </nameValuePair>
      <nameValuePair>
        <name>Queries</name>
        <value>
          <array>
            <string>SELECT name FROM table WHERE namespace = ? AND identifier = ?</string>
          </array>
        </value>
      </nameValuePair>
    </configurationParameterSettings>
    <typeSystemDescription>
      <imports>
        <import name="txtfnnl.uima.typeSystemDescriptor"/>
      </imports>
    </typeSystemDescription>
    <typePriorities/>
    <fsIndexCollection/>
    <capabilities>
      <capability>
        <inputs>
          <type allAnnotatorFeatures="true">txtfnnl.uima.tcas.SyntaxAnnotation</type>
        </inputs>
        <outputs>
          <type allAnnotatorFeatures="true">txtfnnl.uima.tcas.SemanticAnnotation</type>
        </outputs>
        <languagesSupported/>
      </capability>
    </capabilities>
    <operationalProperties>
      <modifiesCas>true</modifiesCas>
      <multipleDeploymentAllowed>true</multipleDeploymentAllowed>
      <outputsNewCASes>false</outputsNewCASes>
    </operationalProperties>
  </analysisEngineMetaData>
  <externalResourceDependencies>
    <externalResourceDependency>
      <key>KnownEntities</key>
      <description>A text file that contains the known entities of each document being processed.

The file format should be TSV, as:
1. documentId
2. entityType
3. namespace
4. identifier</description>
      <optional>false</optional>
    </externalResourceDependency>
    <externalResourceDependency>
      <key>EntityNameDb</key>
      <description>The database containing names for the "namespace, identifier" entities listed by the KnownEntities resource.</description>
      <interfaceName>txtfnnl.uima.resource.JdbcConnectionResource</interfaceName>
      <optional>false</optional>
    </externalResourceDependency>
  </externalResourceDependencies>
  <resourceManagerConfiguration>
    <externalResources>
      <externalResource>
        <name>EntityNameDb</name>
        <description>A database of entity names.

PG URLs: jdbc:postgresql://host:port/database</description>
        <fileResourceSpecifier>
          <fileUrl>jdbc:postgresql://localhost:5432/postgres</fileUrl>
        </fileResourceSpecifier>
        <implementationName>txtfnnl.uima.resource.JdbcConnectionResourceImpl</implementationName>
      </externalResource>
      <externalResource>
        <name>DocumentEntityList</name>
        <description>A list of entities found in each document.</description>
        <fileResourceSpecifier>
          <fileUrl>file:/tmp/path</fileUrl>
        </fileResourceSpecifier>
      </externalResource>
    </externalResources>
    <externalResourceBindings>
      <externalResourceBinding>
        <key>EntityNameDb</key>
        <resourceName>GeneProteinNameDb</resourceName>
      </externalResourceBinding>
      <externalResourceBinding>
        <key>KnownEntities</key>
        <resourceName>DocumentEntityList</resourceName>
      </externalResourceBinding>
    </externalResourceBindings>
  </resourceManagerConfiguration>
</analysisEngineDescription>
